<%- include("../partials/head.ejs") %>

  <body class="log-reg">

    <%- include("../partials/header.ejs") %>

      <main class="login-register">

          <section class="imagen">
            <img src="/images/edit.png" style="width:100%">
          </section>

          
          <section class="camposform">
          <h1>Estas editando tus datos</h1>
          <form action="/users/update?_method=PUT" method="POST" >

            <div class="campo">
              <label for="user">Nombre Completo</label>
              <input type="text" value="<%= userLogin.name %>" id="user" name="name" placeholder="Ingrese nombre completo..." required>
              <% if (locals.errors && errors.name) { %>
                <small class="mensajeError">
                  <%= errors.name.msg %>
                </small>
                <% } %>
            </div>

            <div class="campo">
              <label for="user">Correo Electrónico</label>
              <input type="text" value="<%= userLogin.email %>" id="user" name="email" placeholder="Ingrese e-mail..." required>
              <% if (locals.errors && errors.email) { %>
                <small class="mensajeError">
                  <%= errors.email.msg %>
                </small>
                <% } %>
            </div>

            <div class="campo">
              <label for="password">Contraseña</label>
              <input type="password" id="p1" name="password" placeholder="Ingrese contraseña...">
            <% if (locals.errors && errors.password) { %>
              <small class="mensajeError"> <%= errors.password.msg %> </small>
              <% } %>
            </div>

            <div class="campo">
              <label for="password">Confirmar Contraseña</label>
              <input type="password" id="p2" name="p2" placeholder="Ingrese contraseña...">
            <% if (locals.errors && errors.p2) { %>
              <small class="mensajeError"> <%= errors.p2.msg %> </small>
              <% } %>
            </div>



            <div class="campo">
            <label for="user">Sexo</label>
            <select name="sexo" id="sexo">
              <option name="sexo" selected hidden>Seleccione aquí</option>

                <% sexes.forEach(sex=> { %>
                  <option value="<%= sex.id %>" <%= locals.old && old.id_sex === sex.id  ? 'selected' : null%>><%= sex.name %></option>
                <% }) %>
              </select>
              <% if (locals.errors && errors.sexo) { %>
                <small class="mensajeError"> <%= errors.sexo.msg %> </small>
                <% } %> 
          </div>

          

            <div class="campo">
            <label for="user">Provincia</label>
            <select name="provincia" id="provincia">
              <option value="provincia" selected hidden>Seleccione aquí</option>
              <% provinces.forEach(province=> { %>
                <option value="<%= province.id %>" <%= locals.old && old.id_province === province.id  ? 'selected' : null%>><%= province.name %></option>
              <% }) %>
            </select>
            <% if (locals.errors && errors.provincia) { %>
              <small class="mensajeError"> <%= errors.provincia.msg %> </small>
              <% } %>
          </div>

          <div class="campo">
          <label>Selecciona una nueva foto de perfil</label>
          <div class="buttons">
          <label for="img" >Subir imagen</label>
          <input type="file" id="img" name="img" hidden multiple accept="image/*">
          </div>
          <% if (locals.errors && errors.img) { %>
            <small class="mensajeError"> <%= errors.img.msg %> </small>
            <% } %>
          </div>

            
              <div class="buttons">
              <label for="submit">Editar datos</label>
              <input type="submit" id="submit" name="submit" value="Editar datos" hidden>
              </div>

          </form>
        </section>


      </main>

      <%- include("../partials/footer.ejs") %>

  </body>

  </html>